#######################################################################################
default_config:
#######################################################################################
homeassistant:
  customize: !include customise.yaml
  packages: !include_dir_named custom_packages
  internal_url: !env_var HOMEASSISTANT_INTERNAL_URL
  external_url: !env_var HOMEASSISTANT_EXTERNAL_URL
#######################################################################################
http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1
    - 192.168.1.0/24
  cors_allowed_origins:
    - https://janeandgraham.com
    - https://home.janeandgraham.com
#######################################################################################
tts:
  - platform: google_translate
#######################################################################################
recorder:
  db_url: !env_var HOMEASSISTANT_DB
  commit_interval: 120
  purge_keep_days: 1
  auto_purge: true
# TODO: Disabled all sensors in favour of redirecting to Grafana?
#  exclude:
#    entity_globs:
#      - sensor.*
#######################################################################################
influxdb:
  api_version: 2
  ssl: false
  host: !env_var INFLUXDB_HOST
  port: !env_var INFLUXDB_PORT
  token: !env_var INFLUXDB_TOKEN
  organization: !env_var INFLUXDB_ORG
  bucket: !env_var INFLUXDB_BUCKET_HOME_PRIVATE
  precision: 's'
  measurement_attr: 'domain__device_class'
  default_measurement: 'sensor'
  tags:
    source: 'haas'
    version: !env_var SERVICE_VERSION_COMPACT
  tags_attributes:
    - 'state_class'
    - 'friendly_name'
    - 'unit_of_measurement'
  exclude:
    domains:
      - 'zone'
      - 'scene'
      - 'select'
    entity_globs:
      - '*_bass'
      - '*_treble'
      - '*_sim_*'
      - '*_microphone_level'
      - 'adaptive_lighting_bedroom_*'
      - 'roof_water_heater_booster_mqtt_connect_count'
      - 'roof_water_heater_booster_wifi_connect_count'
  ignore_attributes: !include influxdb-ignores.yaml
  #####################################################################################
mqtt:
  broker: !env_var VERNEMQ_HOST
  port: !env_var VERNEMQ_PORT
  client_id: 'hass'
  discovery: true
  discovery_prefix: 'haas/entity'
  birth_message:
    topic: 'hass/system/status'
    payload: 'online'
  will_message:
    topic: 'hass/system/status'
    payload: 'offline'
#######################################################################################
discovery:
  ignore:
    - homekit
#######################################################################################
panel_custom: !include ui-panel-custom.yaml
#######################################################################################
lovelace:
  mode: yaml
  resources:
    - url: /local/custom_ui/bom-weather-card.js?v=0.90a-HACKED
      type: module
    - url: /local/custom_ui/layout-card/layout-card.js?v=2.4.1
      type: module
    - url: /local/custom_ui/bom-radar-card/bom-radar-card.js?v=v1.5.0
      type: module
    - url: /local/custom_ui/apexcharts-card/apexcharts-card.js?v=v1.10.0
      type: module
    - url: /local/custom_ui/mini-graph-card/mini-graph-card-bundle.js?v=v0.10.0
      type: module
  dashboards:
    lovelace-generated:
      mode: yaml
      filename: notexist.yaml
      title: Generated
      icon: mdi:tools
      show_in_sidebar: true
      require_admin: true
#######################################################################################
logger:
  default: warn # critical fatal error warning warn info debug notset
  logs:
    homeassistant.core: warn
    homeassistant.loader: error
    homeassistant.components.websocket_api.http.connection: fatal
    custom_components.tplink: error
  #   custom_components.powercalc: info
  #   homeassistant.components.mqtt: info
  #   custom_components.adaptive_lighting: info
  #   custom_components.bureau_of_meteorology: info
  #   homeassistant.components.automation.electricity_smart_plug_polling: warn
  #####################################################################################
