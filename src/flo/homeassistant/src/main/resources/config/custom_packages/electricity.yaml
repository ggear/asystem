#######################################################################################
# WARNING: This file is written to by the build process, any manual edits will be lost!
#######################################################################################
powercalc:
  force_update_frequency: 00:00:05
  enable_autodiscovery: false
  power_sensor_precision: 1
  energy_sensor_precision: 3
  power_sensor_naming: '{} Power'
  energy_sensor_naming: '{} Energy'
  create_utility_meters: true
  utility_meter_types:
    - daily
    - weekly
    - monthly
    - yearly
#######################################################################################
template:
  #####################################################################################
  - binary_sensor:
      #################################################################################
      - unique_id: kitchen_fan_proxy
        state: >-
          {{ states('switch.kitchen_fan') }}
      #################################################################################
      - unique_id: kitchen_downlights_proxy
        state: >-
          {{ states('switch.kitchen_downlights') }}
      #################################################################################
      - unique_id: deck_festoons_proxy
        state: >-
          {{ states('switch.deck_festoons') }}
      #################################################################################
      - unique_id: landing_festoons_proxy
        state: >-
          {{ states('switch.landing_festoons') }}
      #################################################################################
      - unique_id: bathroom_rails_proxy
        state: >-
          {{ states('switch.bathroom_rails') }}
      #################################################################################
      - unique_id: lounge_air_purifier_proxy
        state: >-
          {{ states('fan.lounge_air_purifier') }}
        attributes:
          fan_speed: >-
            {{ states('sensor.lounge_air_purifier_fan_speed') | int(0) }}
      #################################################################################
      - unique_id: dining_air_purifier_proxy
        state: >-
          {{ states('fan.dining_air_purifier') }}
        attributes:
          fan_speed: >-
            {{ states('sensor.dining_air_purifier_fan_speed') | int(0) }}
      #################################################################################
      - unique_id: lounge_tv_outlet_proxy
        state: >-
          {{ states('switch.lounge_tv_outlet') }}
      #################################################################################
      - unique_id: lounge_sub_proxy
        state: >-
          {{ states('switch.lounge_sub') }}
      #################################################################################
      - unique_id: study_outlet_proxy
        state: >-
          {{ states('switch.study_outlet') }}
      #################################################################################
      - unique_id: office_outlet_proxy
        state: >-
          {{ states('switch.office_outlet') }}
      #################################################################################
      - unique_id: kitchen_dish_washer_proxy
        state: >-
          {{ states('switch.kitchen_dish_washer') }}
      #################################################################################
      - unique_id: laundry_clothes_dryer_proxy
        state: >-
          {{ states('switch.laundry_clothes_dryer') }}
      #################################################################################
      - unique_id: laundry_washing_machine_proxy
        state: >-
          {{ states('switch.laundry_washing_machine') }}
      #################################################################################
      - unique_id: kitchen_coffee_machine_proxy
        state: >-
          {{ states('switch.kitchen_coffee_machine') }}
      #################################################################################
      - unique_id: kitchen_fridge_proxy
        state: >-
          {{ states('switch.kitchen_fridge') }}
      #################################################################################
      - unique_id: deck_freezer_proxy
        state: >-
          {{ states('switch.deck_freezer') }}
      #################################################################################
      - unique_id: study_battery_charger_proxy_proxy
        state: >-
          {{ states('switch.study_battery_charger') }}
      #################################################################################
      - unique_id: laundry_vacuum_charger_proxy
        state: >-
          {{ states('switch.laundry_vacuum_charger') }}
      #################################################################################
      - unique_id: ada_tablet_proxy
        state: >-
          {{ states('switch.ada_tablet') }}
      #################################################################################
      - unique_id: server_flo_outlet_proxy
        state: >-
          {{ states('switch.server_flo_outlet') }}
      #################################################################################
      - unique_id: server_meg_outlet_proxy
        state: >-
          {{ states('switch.server_meg_outlet') }}
      #################################################################################
      - unique_id: rack_outlet_proxy
        state: >-
          {{ states('switch.rack_outlet') }}
      #################################################################################
      - unique_id: roof_network_switch_proxy
        state: >-
          {{ states('switch.roof_network_switch') }}
      #################################################################################
      - unique_id: rack_modem_proxy
        state: >-
          {{ states('switch.rack_modem') }}
      #################################################################################
sensor:
  #####################################################################################
  - platform: powercalc
    entities:
      - entity_id: media_player.lounge_arc
        name: Lounge Arc
  #####################################################################################
  - platform: powercalc
    create_group: Server Flo
    entities:
      - entity_id: binary_sensor.template_server_flo_outlet_proxy
        standby_power: 0.5
        unavailable_power: 0
        fixed:
          power: 0.9
      - entity_id: switch.server_flo_outlet
        power_sensor_id: sensor.server_flo_outlet_current_consumption
        energy_sensor_id: sensor.server_flo_outlet_total_consumption
  #####################################################################################
  - platform: powercalc
    create_group: Server Meg
    entities:
      - entity_id: binary_sensor.template_server_meg_outlet_proxy
        standby_power: 0.5
        unavailable_power: 0
        fixed:
          power: 0.9
      - entity_id: switch.server_meg_outlet
        power_sensor_id: sensor.server_meg_outlet_current_consumption
        energy_sensor_id: sensor.server_meg_outlet_total_consumption
  #####################################################################################
  - platform: powercalc
    create_group: Internet Modem
    entities:
      - entity_id: binary_sensor.template_rack_modem_proxy
        standby_power: 0.5
        unavailable_power: 0
        fixed:
          power: 0.9
      - entity_id: switch.rack_modem
        power_sensor_id: sensor.rack_modem_current_consumption
        energy_sensor_id: sensor.rack_modem_total_consumption
  #####################################################################################
  - platform: powercalc
    create_group: Home
    entities:
      #################################################################################
      - create_group: Home Base
        entities:
          #############################################################################
          - create_group: Fans
            entities:
              #########################################################################
              - create_group: Ada Fans
                entities:
                  - entity_id: fan.ada_fan
                    standby_power: 1.3
                    linear:
                      min_power: 2.5
                      max_power: 31.1
              #########################################################################
              - create_group: Edwin Fans
                entities:
                  - entity_id: fan.edwin_fan
                    standby_power: 1.3
                    linear:
                      min_power: 2.5
                      max_power: 31.1
              #########################################################################
              - create_group: Parents Fans
                entities:
                  - entity_id: fan.parents_fan
                    standby_power: 1.3
                    linear:
                      min_power: 2.5
                      max_power: 31.1
              #########################################################################
              - create_group: Kitchen Fans
                entities:
                  - entity_id: binary_sensor.template_kitchen_fan_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.kitchen_fan
                    power_sensor_id: sensor.kitchen_fan_current_consumption
                    energy_sensor_id: sensor.kitchen_fan_total_consumption
              #########################################################################
              - create_group: Lounge Fans
                entities:
                  - entity_id: fan.lounge_fan
                    standby_power: 1.3
                    linear:
                      min_power: 2.5
                      max_power: 31.1
                  - entity_id: binary_sensor.template_lounge_air_purifier_proxy
                    standby_power: 0.5
                    linear:
                      attribute: fan_speed
                      calibrate:
                        - 0 -> 0
                        - 1 -> 1.7
                        - 2 -> 3.6
                        - 3 -> 8.1
                        - 4 -> 16.6
                        - 5 -> 21.9
              #########################################################################
              - create_group: Deck Fans
                entities:
                  - entity_id: fan.deck_east_fan
                    standby_power: 1.3
                    linear:
                      min_power: 2.5
                      max_power: 31.1
                  - entity_id: fan.deck_west_fan
                    standby_power: 1.3
                    linear:
                      min_power: 2.5
                      max_power: 31.1
              #########################################################################
              - create_group: Dining Fans
                entities:
                  - entity_id: binary_sensor.template_dining_air_purifier_proxy
                    standby_power: 0.5
                    linear:
                      attribute: fan_speed
                      calibrate:
                        - 0 -> 0
                        - 1 -> 1.7
                        - 2 -> 3.6
                        - 3 -> 8.1
                        - 4 -> 16.6
                        - 5 -> 21.9
          #############################################################################
          - create_group: Lights
            entities:
              #########################################################################
              - create_group: Ada Lights
                entities:
                  - entity_id: light.ada_fan
                    name: Ada Main Fan Light
                    unique_id: ada_main_light_fan
                    linear:
                      min_power: 0.5
                      max_power: 16.3
                  - entity_id: light.ada_lamp_bulb_1
              #########################################################################
              - create_group: Edwin Lights
                entities:
                  - entity_id: light.edwin_lamp_bulb_1
                  - entity_id: light.edwin_fan
                    name: Edwin Main Fan Light
                    unique_id: edwin_main_light_fan
                    linear:
                      min_power: 0.5
                      max_power: 16.3
                  - entity_id: light.edwin_night_light_bulb_1
              #########################################################################
              - create_group: Hallway Lights
                entities:
                  - entity_id: light.hallway_main_bulb_1
                  - entity_id: light.hallway_main_bulb_2
                  - entity_id: light.hallway_main_bulb_3
                  - entity_id: light.hallway_main_bulb_4
              #########################################################################
              - create_group: Dining Lights
                entities:
                  - entity_id: light.dining_main_bulb_1
                  - entity_id: light.dining_main_bulb_2
                  - entity_id: light.dining_main_bulb_3
                  - entity_id: light.dining_main_bulb_4
                  - entity_id: light.dining_main_bulb_5
                  - entity_id: light.dining_main_bulb_6
              #########################################################################
              - create_group: Lounge Lights
                entities:
                  - entity_id: light.lounge_main_bulb_1
                  - entity_id: light.lounge_main_bulb_2
                  - entity_id: light.lounge_main_bulb_3
                  - entity_id: light.lounge_fan
                    name: Lounge Fan Light
                    unique_id: lounge_light_fan
                    linear:
                      min_power: 0.5
                      max_power: 16.3
                  - entity_id: light.lounge_lamp_bulb_1
              #########################################################################
              - create_group: Parents Lights
                entities:
                  - entity_id: light.parents_main_bulb_1
                  - entity_id: light.parents_main_bulb_2
                  - entity_id: light.parents_main_bulb_3
              #########################################################################
              - create_group: Study Lights
                entities:
                  - entity_id: light.study_lamp_bulb_1
              #########################################################################
              - create_group: Kitchen Lights
                entities:
                  - entity_id: light.kitchen_main_bulb_1
                  - entity_id: light.kitchen_main_bulb_2
                  - entity_id: light.kitchen_main_bulb_3
                  - entity_id: light.kitchen_main_bulb_4
                  - entity_id: binary_sensor.template_kitchen_downlights_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.kitchen_downlights
                    power_sensor_id: sensor.kitchen_downlights_current_consumption
                    energy_sensor_id: sensor.kitchen_downlights_total_consumption
              #########################################################################
              - create_group: Laundry Lights
                entities:
                  - entity_id: light.laundry_main_bulb_1
              #########################################################################
              - create_group: Pantry Lights
                entities:
                  - entity_id: light.pantry_main_bulb_1
              #########################################################################
              - create_group: Office Lights
                entities:
                  - entity_id: light.office_main_bulb_1
              #########################################################################
              - create_group: Bathroom Lights
                entities:
                  - entity_id: light.bathroom_main_bulb_1
              #########################################################################
              - create_group: Ensuite Lights
                entities:
                  - entity_id: light.ensuite_main_bulb_1
              #########################################################################
              - create_group: Wardrobe Lights
                entities:
                  - entity_id: light.wardrobe_main_bulb_1
              #########################################################################
              - create_group: Deck Lights
                entities:
                  - entity_id: binary_sensor.template_deck_festoons_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.deck_festoons
                    power_sensor_id: sensor.deck_festoons_current_consumption
                    energy_sensor_id: sensor.deck_festoons_total_consumption
              #########################################################################
              - create_group: Landing Lights
                entities:
                  - entity_id: binary_sensor.template_landing_festoons_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.landing_festoons
                    power_sensor_id: sensor.landing_festoons_current_consumption
                    energy_sensor_id: sensor.landing_festoons_total_consumption
          #############################################################################
          - create_group: Audio Visual Devices
            entities:
              #########################################################################
              - create_group: Lounge TV
                entities:
                  - entity_id: binary_sensor.template_lounge_tv_outlet_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.lounge_tv_outlet
                    power_sensor_id: sensor.lounge_tv_outlet_current_consumption
                    energy_sensor_id: sensor.lounge_tv_outlet_total_consumption
              #########################################################################
              - create_group: Lounge Sub
                entities:
                  - entity_id: binary_sensor.template_lounge_sub_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.lounge_sub
                    power_sensor_id: sensor.lounge_sub_current_consumption
                    energy_sensor_id: sensor.lounge_sub_total_consumption
              #########################################################################
              - create_group: Ada Tablet
                entities:
                  - entity_id: switch.template_ada_tablet_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.ada_tablet
                    power_sensor_id: sensor.ada_tablet_current_consumption
                    energy_sensor_id: sensor.ada_tablet_total_consumption
              #########################################################################
              - create_group: Ada Audio Visual Devices
                entities:
                  - entity_id: media_player.ada_home
                    name: Ada Home
              #########################################################################
              - create_group: Edwin Audio Visual Devices
                entities:
                  - entity_id: media_player.edwin_home
                    name: Edwin Home
              #########################################################################
              - create_group: Parents Audio Visual Devices
                entities:
                  - entity_id: media_player.parents_home
                    model: Nest Hub 2gen
                  - entity_id: media_player.parents_move
                    name: Parents Move
              #########################################################################
              - create_group: Kitchen Audio Visual Devices
                entities:
                  - entity_id: media_player.kitchen_home
                    model: Nest Hub 2gen
                  - entity_id: media_player.kitchen_move
                    name: Kitchen Move
                  - entity_id: media_player.kitchen_five
                    name: Kitchen Five
              #########################################################################
              - create_group: Office Audio Visual Devices
                entities:
                  - entity_id: media_player.office_home
                    name: Office Home
              #########################################################################
              - create_group: Lounge Audio Visual Devices
                entities:
                  - entity_id: media_player.lounge_home
                    name: Lounge Home
          #############################################################################
          - create_group: Power Plugs
            entities:
              #########################################################################
              - create_group: Study Outlet
                entities:
                  - entity_id: binary_sensor.template_study_outlet_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.study_outlet
                    power_sensor_id: sensor.study_outlet_current_consumption
                    energy_sensor_id: sensor.study_outlet_total_consumption
              #########################################################################
              - create_group: Office Outlet
                entities:
                  - entity_id: binary_sensor.template_office_outlet_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.office_outlet
                    power_sensor_id: sensor.office_outlet_current_consumption
                    energy_sensor_id: sensor.office_outlet_total_consumption
              #########################################################################
              - create_group: Study Battery Charger
                entities:
                  - entity_id: binary_sensor.template_study_battery_charger_proxy_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.study_battery_charger
                    power_sensor_id: sensor.study_battery_charger_current_consumption
                    energy_sensor_id: sensor.study_battery_charger_total_consumption
              #########################################################################
              - create_group: Laundry Vacuum Charger
                entities:
                  - entity_id: binary_sensor.template_laundry_vacuum_charger_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.laundry_vacuum_charger
                    power_sensor_id: sensor.laundry_vacuum_charger_current_consumption
                    energy_sensor_id: sensor.laundry_vacuum_charger_total_consumption
          #############################################################################
          - create_group: Whitegoods Continuous
            entities:
              #########################################################################
              - create_group: Kitchen Fridge
                entities:
                  - entity_id: binary_sensor.template_kitchen_fridge_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.kitchen_fridge
                    power_sensor_id: sensor.kitchen_fridge_current_consumption
                    energy_sensor_id: sensor.kitchen_fridge_total_consumption
              #########################################################################
              - create_group: Deck Freezer
                entities:
                  - entity_id: binary_sensor.template_deck_freezer_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.deck_freezer
                    power_sensor_id: sensor.deck_freezer_current_consumption
                    energy_sensor_id: sensor.deck_freezer_total_consumption
          #############################################################################
          - create_group: Servers & Network
            entities:
              #########################################################################
              - create_group: Server Rack
                entities:
                  - entity_id: binary_sensor.template_rack_outlet_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.rack_outlet
                    power_sensor_id: sensor.rack_outlet_current_consumption
                    energy_sensor_id: sensor.rack_outlet_total_consumption
              #########################################################################
              - create_group: Network Switch
                entities:
                  - entity_id: binary_sensor.template_roof_network_switch_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.roof_network_switch
                    power_sensor_id: sensor.roof_network_switch_current_consumption
                    energy_sensor_id: sensor.roof_network_switch_total_consumption
              #########################################################################
              - create_group: Zigbee Repeaters
                entities:
                  - entity_id: switch.deck_fans_outlet
                    standby_power: 0.2
                    fixed:
                      power: 0.5
                  - entity_id: switch.kitchen_fan_outlet
                    standby_power: 0.2
                    fixed:
                      power: 0.5
                  - entity_id: switch.edwin_wardrobe_outlet
                    standby_power: 0.2
                    fixed:
                      power: 0.5
                  - entity_id: sensor.garden_repeater_linkquality
                    standby_power: 0
                    fixed:
                      power: 0.4
                  - entity_id: sensor.landing_repeater_linkquality
                    standby_power: 0
                    fixed:
                      power: 0.4
                  - entity_id: sensor.driveway_repeater_linkquality
                    standby_power: 0
                    fixed:
                      power: 0.4
      #################################################################################
      - create_group: Home Peak
        entities:
          #############################################################################
          - create_group: Heating & Cooling
            entities:
              #########################################################################
              - create_group: Bathroom Towel Rails
                entities:
                  - entity_id: binary_sensor.template_bathroom_rails_proxy
                    standby_power: 1.54
                    unavailable_power: 0
                    fixed:
                      power: 2.19
                  - entity_id: switch.bathroom_rails
                    power_sensor_id: sensor.bathroom_rails_current_consumption
                    energy_sensor_id: sensor.bathroom_rails_total_consumption
          #############################################################################
          - create_group: Whitegoods Discretionary
            entities:
              #########################################################################
              - create_group: Kitchen Dish Washer
                entities:
                  - entity_id: binary_sensor.template_kitchen_dish_washer_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.kitchen_dish_washer
                    power_sensor_id: sensor.kitchen_dish_washer_current_consumption
                    energy_sensor_id: sensor.kitchen_dish_washer_total_consumption
              #########################################################################
              - create_group: Laundry Clothes Dryer
                entities:
                  - entity_id: binary_sensor.template_laundry_clothes_dryer_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.laundry_clothes_dryer
                    power_sensor_id: sensor.laundry_clothes_dryer_current_consumption
                    energy_sensor_id: sensor.laundry_clothes_dryer_total_consumption
              #########################################################################
              - create_group: Laundry Washing Machine
                entities:
                  - entity_id: binary_sensor.template_laundry_washing_machine_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.laundry_washing_machine
                    power_sensor_id: sensor.laundry_washing_machine_current_consumption
                    energy_sensor_id: sensor.laundry_washing_machine_total_consumption
              #########################################################################
              - create_group: Kitchen Coffee Machine
                entities:
                  - entity_id: binary_sensor.template_kitchen_coffee_machine_proxy
                    standby_power: 0.5
                    unavailable_power: 0
                    fixed:
                      power: 0.9
                  - entity_id: switch.kitchen_coffee_machine
                    power_sensor_id: sensor.kitchen_coffee_machine_current_consumption
                    energy_sensor_id: sensor.kitchen_coffee_machine_total_consumption
  #####################################################################################
