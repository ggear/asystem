version: '3.7'
services:
  vernemq:
    container_name: vernemq
    image: vernemq/vernemq:1.10.4.1-alpine
    init: true
    restart: ${RESTART}
    environment:
      - TZ=Australia/Perth
      - DOCKER_VERNEMQ_ACCEPT_EULA=yes
      - DOCKER_VERNEMQ_ALLOW_ANONYMOUS=on

    # TODO: Get permission denied?
    #    volumes:
    #      - ${DATA_DIR}:/var/lib/vernemq

    ports:
      - 1883:1883
    deploy:
      resources:
        limits:
          memory: 4G